import React, { useState } from 'react'; import axios from 'axios'; const API='http://localhost:4000'; export default function PoolingPage(){ const [members,setMembers]=useState([{shipId:'R002',cbBefore:0},{shipId:'R003',cbBefore:-2000000}]); async function createPool(){ try{ const res=await axios.post(`${API}/pools`, { year: 2024, members }); alert('Pool created: ' + res.data.poolId); }catch(e:any){ alert('Error: ' + (e?.response?.data?.error || e.message)); } } function update(i:number, v:number){ const c=[...members]; c[i].cbBefore=v; setMembers(c); } return (<div><h2 className='text-xl font-semibold mb-2'>Pooling</h2><table className='w-full border'><thead className='bg-gray-100'><tr><th className='p-2'>shipId</th><th className='p-2'>cbBefore (g)</th></tr></thead><tbody>{members.map((m,i)=>(<tr key={m.shipId}><td className='p-2'>{m.shipId}</td><td className='p-2'><input type='number' value={m.cbBefore} onChange={e=>update(i, Number(e.target.value))} className='border px-2' /></td></tr>))}</tbody></table><div className='mt-2'><button className='px-3 py-1 bg-blue-600 text-white rounded' onClick={createPool}>Create Pool</button></div></div>) }
